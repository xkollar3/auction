services:
  axonserver:
    image: axoniq/axonserver:latest
    container_name: axonserver
    hostname: axonserver
    ports:
      - "8024:8024"
      - "8124:8124"
    environment:
      - AXONIQ_AXONSERVER_STANDALONE=true
    networks:
      - banking-network
    volumes:
      - axonserver-data:/axonserver/data
      - axonserver-events:/axonserver/events
      - axonserver-config:/axonserver/config
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:8024/actuator/health"]
      interval: 10s
      timeout: 5s
      retries: 5

networks:
  banking-network:
    driver: bridge

volumes:
  axonserver-data:
  axonserver-events:
  axonserver-config:
